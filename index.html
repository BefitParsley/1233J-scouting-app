<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VEX Event Scouting - Teams & Questions</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 2rem;
      max-width: 900px;
    }
    h1 {
      margin-bottom: 1rem;
    }
    .team {
      border: 1px solid #ccc;
      padding: 1rem;
      margin-bottom: 1rem;
      border-radius: 6px;
    }
    .team-name {
      font-weight: bold;
      font-size: 1.2rem;
      margin-bottom: 0.5rem;
    }
    .questions {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }
    .question {
      flex: 1 1 150px;
      display: flex;
      flex-direction: column;
    }
    label {
      font-size: 0.9rem;
      margin-bottom: 0.25rem;
    }
    input[type="text"], select {
      padding: 0.3rem;
      font-size: 1rem;
    }
  </style>
</head>
<body>

  <h1>Teams at Event 59926</h1>
  <div id="teamsContainer">Loading teams...</div>

  <script>
    const eventId = 59926;
    const limit = 100;
    const teamsContainer = document.getElementById('teamsContainer');

    // Example questions - customize as needed
    const scoutingQuestions = [
      { id: 'auton', label: 'Autonomous Performance', type: 'select', options: ['Poor', 'Average', 'Good', 'Excellent'] },
      { id: 'driver', label: 'Driver Skill', type: 'select', options: ['Poor', 'Average', 'Good', 'Excellent'] },
      { id: 'notes', label: 'Notes', type: 'text' }
    ];

    async function fetchTeams(page = 1) {
      const url = `https://www.robotevents.com/api/v2/events/${eventId}/teams?page=${page}&limit=${limit}`;
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(`API request failed with status ${response.status}`);
      }
      return response.json();
    }

    async function loadAllTeams() {
      try {
        let allTeams = [];
        let page = 1;
        let totalPages;

        do {
          const data = await fetchTeams(page);
          allTeams = allTeams.concat(data.data);
          totalPages = data.meta.last_page;
          page++;
        } while (page <= totalPages);

        displayTeams(allTeams);
      } catch (error) {
        teamsContainer.textContent = 'Error loading teams: ' + error.message;
      }
    }

    function displayTeams(teams) {
      if (teams.length === 0) {
        teamsContainer.textContent = 'No teams found.';
        return;
      }

      teamsContainer.innerHTML = '';
      teams.forEach(team => {
        const teamDiv = document.createElement('div');
        teamDiv.className = 'team';

        // Team name only
        const nameEl = document.createElement('div');
        nameEl.className = 'team-name';
        nameEl.textContent = team.team_name;
        teamDiv.appendChild(nameEl);

        // Questions container
        const questionsDiv = document.createElement('div');
        questionsDiv.className = 'questions';

        scoutingQuestions.forEach(q => {
          const questionDiv = document.createElement('div');
          questionDiv.className = 'question';

          const label = document.createElement('label');
          label.htmlFor = `${q.id}-${team.id}`;
          label.textContent = q.label;
          questionDiv.appendChild(label);

          let input;
          if (q.type === 'select') {
            input = document.createElement('select');
            input.id = `${q.id}-${team.id}`;
            q.options.forEach(opt => {
              const option = document.createElement('option');
              option.value = opt;
              option.textContent = opt;
              input.appendChild(option);
            });
          } else {
            input = document.createElement('input');
            input.type = q.type;
            input.id = `${q.id}-${team.id}`;
          }

          questionDiv.appendChild(input);
          questionsDiv.appendChild(questionDiv);
        });

        teamDiv.appendChild(questionsDiv);
        teamsContainer.appendChild(teamDiv);
      });
    }

    // Load teams on page load
    loadAllTeams();
  </script>

</body>
</html>
